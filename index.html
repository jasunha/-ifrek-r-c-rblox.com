<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Havalı Giriş / Kayıt Sistemi</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to right, #4b6cb7, #182848);
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      height: 100vh;
      margin: 0;
      padding: 20px;
    }
    .menu-buttons {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
    }
    .menu-buttons button {
      padding: 10px 20px;
      background: #3498db;
      border: none;
      border-radius: 10px;
      color: white;
      font-weight: bold;
      cursor: pointer;
    }
    .wrapper {
      display: none;
      justify-content: center;
      margin-bottom: 20px;
    }
    .container {
      background: #2c3e50;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
      width: 300px;
    }
    .container h2 {
      text-align: center;
      margin-bottom: 20px;
    }
    input[type="text"], input[type="password"], input[type="email"] {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: none;
      border-radius: 5px;
    }
    button {
      width: 100%;
      padding: 10px;
      background: #3498db;
      border: none;
      border-radius: 5px;
      color: white;
      font-weight: bold;
      cursor: pointer;
      margin-top: 10px;
    }
    #adminPanel {
      display: none;
      margin-top: 30px;
      width: 80%;
      max-width: 600px;
      background-color: #34495e;
      padding: 20px;
      border-radius: 15px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      color: white;
    }
    table, th, td {
      border: 1px solid white;
      padding: 8px;
    }
    #emptyScreen {
      display: none;
      width: 100%;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #2c3e50;
    }
  </style>
</head>
<body onload="showSection('userLoginSection')">
  <div class="menu-buttons">
    <button onclick="showSection('registerSection')">Kayıt Ol</button>
    <button onclick="showSection('userLoginSection')">Kullanıcı Girişi</button>
    <button onclick="showSection('adminLoginSection')">Admin Girişi</button>
  </div>

  <div class="wrapper" id="registerSection">
    <div class="container">
      <h2>Kayıt</h2>
      <input type="text" id="regUsername" placeholder="Kullanıcı Adı" />
      <input type="email" id="regEmail" placeholder="E-Posta" />
      <input type="password" id="regPassword" placeholder="Şifre (10 karakter)" maxlength="10" />
      <input type="checkbox" onclick="togglePassword('regPassword')"> Şifreyi Göster
      <button onclick="register()">Kayıt Ol</button>
    </div>
  </div>

  <div class="wrapper" id="userLoginSection">
    <div class="container">
      <h2>Kullanıcı Girişi</h2>
      <input type="text" id="loginUsername" placeholder="Kullanıcı Adı" />
      <input type="password" id="loginPassword" placeholder="Şifre" />
      <input type="checkbox" onclick="togglePassword('loginPassword')"> Şifreyi Göster
      <button onclick="login()">Giriş Yap</button>
    </div>
  </div>

  <div class="wrapper" id="adminLoginSection">
    <div class="container">
      <h2>Admin Girişi</h2>
      <input type="email" id="adminEmailInput" placeholder="Admin E-Posta" />
      <button onclick="adminLogin()">Admin Girişi</button>
    </div>
  </div>

  <div id="adminPanel">
    <h2>Admin Panel</h2>
    <table>
      <thead>
        <tr><th>E-posta</th><th>Kullanıcı Adı</th><th>IP Adresi</th></tr>
      </thead>
      <tbody id="userTableBody"></tbody>
    </table>
  </div>

  <!-- Boş Ekran -->
  <div id="emptyScreen">
    <!-- Giriş sonrası burada başka bir içerik veya sadece boş ekran gösterilebilir -->
  </div>

  <script>
    const users = [];
    const adminEmail = 'jasunhaadmin@gmail.com';

    function getIP() {
      return fetch('https://api.ipify.org?format=json')
        .then(response => response.json())
        .then(data => data.ip)
        .catch(error => {
          console.error('IP alınamadı:', error);
          return '192.168.1.1'; // Fallback IP
        });
    }

    function validateEmail(email) {
      const re = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;
      return re.test(email);
    }

    function showSection(sectionId) {
      const sections = ['registerSection', 'userLoginSection', 'adminLoginSection'];
      sections.forEach(id => {
        document.getElementById(id).style.display = id === sectionId ? 'flex' : 'none';
      });
      document.getElementById('adminPanel').style.display = 'none';
      document.getElementById('emptyScreen').style.display = 'none'; // Giriş sonrası boş ekranı gizle
    }

    async function register() {
      const username = document.getElementById('regUsername').value;
      const email = document.getElementById('regEmail').value;
      const password = document.getElementById('regPassword').value;

      if (!username || !email || !password) {
        alert('Lütfen tüm alanları doldurun.');
        return;
      }
      if (!validateEmail(email)) {
        alert('Geçerli bir e-posta girin.');
        return;
      }
      if (password.length < 10) {
        alert('Şifre en az 10 karakter olmalı.');
        return;
      }

      const ip = await getIP();  // Gerçek IP'yi almak için bekleyin
      users.push({ username, email, password, ip });
      setTimeout(() => {
        showSection('userLoginSection');
      }, 2000);
    }

    function login() {
      const username = document.getElementById('loginUsername').value;
      const password = document.getElementById('loginPassword').value;

      if (!username || !password) {
        alert('Lütfen kullanıcı adı ve şifre girin.');
        return;
      }

      const user = users.find(u => u.username === username && u.password === password);
      if (!user) {
        alert('Kullanıcı bulunamadı veya bilgiler hatalı.');
      } else {
        // Kullanıcı başarılı giriş yaptı, sadece boş ekranı göster
        setTimeout(() => {
          document.getElementById('emptyScreen').style.display = 'flex'; // Boş ekranı göster
        }, 1000); // 1 saniye sonra boş ekranı göster
        
        // Kullanıcı bilgilerini admin paneline kaydet
        showUsers();
      }
    }

    function adminLogin() {
      const email = document.getElementById('adminEmailInput').value;
      if (email !== adminEmail) {
        alert('Admin e-posta adresi yanlış!');
        return;
      }

      document.getElementById('registerSection').style.display = 'none';
      document.getElementById('userLoginSection').style.display = 'none';
      document.getElementById('adminLoginSection').style.display = 'none';
      document.getElementById('adminPanel').style.display = 'block';
      showUsers();
    }

    function showUsers() {
      const table = document.getElementById('userTableBody');
      table.innerHTML = '';
      users.forEach(user => {
        const row = `<tr><td>${user.email}</td><td>${user.username}</td><td>${user.ip}</td></tr>`;
        table.innerHTML += row;
      });
    }

    function togglePassword(fieldId) {
      const pass = document.getElementById(fieldId);
      pass.type = pass.type === 'password' ? 'text' : 'password';
    }
  </script>
</body>
</html>
